CREATE DATABASE IF NOT EXISTS ong;

USE ong;

CREATE TABLE IF NOT EXISTS user (
	id BIGINT AUTO_INCREMENT NOT NULL,
    cpf VARCHAR(20) UNIQUE NOT NULL,
    email VARCHAR(50) UNIQUE NOT NULL,
    pass VARCHAR(100) NOT NULL,
    username VARCHAR(100) NOT NULL,
    isAdmin BOOLEAN NOT NULL DEFAULT FALSE,
    CONSTRAINT id PRIMARY KEY (id)
) ENGINE=INNODB;

CREATE TABLE IF NOT EXISTS computer (
	id BIGINT AUTO_INCREMENT NOT NULL,
    description TEXT NOT NULL,
    owner BIGINT NOT NULL,
    status INT NOT NULL DEFAULT 0,
    pickUpDate DATE,
    FOREIGN KEY (owner) REFERENCES user(id) ON DELETE CASCADE,
    CONSTRAINT id PRIMARY KEY (id)
) ENGINE=INNODB;

CREATE TABLE IF NOT EXISTS message (
	id BIGINT AUTO_INCREMENT NOT NULL,
    sender BIGINT NOT NULL,
    receiver BIGINT NOT NULL,
    subject VARCHAR(50) NOT NULL,
    message TEXT NOT NULL,
    FOREIGN KEY (receiver) REFERENCES user(id) ON DELETE CASCADE,
    FOREIGN KEY (sender) REFERENCES user(id) ON DELETE CASCADE,
    CONSTRAINT id PRIMARY KEY (id)
) ENGINE=INNODB;

INSERT INTO user (cpf, email, pass, username, isAdmin)
VALUES (00000000000, 'ong@ong.com', 'password', 'ong', TRUE);